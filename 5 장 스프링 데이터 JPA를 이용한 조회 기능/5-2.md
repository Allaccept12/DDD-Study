# 스프링 데이터 JPA를 이용한 스펙 구현

스프링 데이터 JPA는 검색 조건을 표현하기 위한 인터페이스인 Sepcificatio을 제공한다

```java
import java.io.Serializable;
import javax.persistence.criteria.CriteriaBuilder;
import javax.persistence.criteria.CriteriaQuery;
import javax.persistence.criteria.Predicate;
import javax.persistence.criteria.Root;
import org.springframework.lang.Nullable;

public interface Specification<T> extends Serializable {
    long serialVersionUID = 1L;
    
    //not, or, where, and 메서드 생략
    
    @Nullable
    Predicate toPredicate(Root<T> root, CriteriaQuery<?> query, CriteriaBuilder criteriaBuilder);
}
```
스펙에서 제네릭 타입 파라미터 T는 JPA 엔티티 타입을 의미한다. toPredicate()메서드는 JPA 크리테리아 API에서 조건을 표현하는 Predicate를 생성한다. 예를 들어 
- 엔티티 타입이 OrderSummary다.
- ordererId 프로펕 값이 지정한 값과 동일하다.

```java
public class OrdererIdSpec implements Specification<OrderSummary> {
  private String ordererId;
  
  public OrdererIdSpec(String ordererId){
    this.ordererId = ordererId;
  }
  
  @Override
  public Predicate toPredicate(Root<OrderSummary> root,
                              CriteriaQuery<?> query,
                              CriteriaBuilder cb){
    return cb.equal(root.get(OrderSummary_.ordererId), ordererId);
  }
}
```
OrdererIdSpec 클래스는 Specification<OrderSummary> 타입을 구현하므로 OrderSummary에 대한 검색 조건을 표현한다. toPredicate() 메서드를 구현한 코드는 "ordererId"프로퍼티 값이 생성자
로 전달 받은 ordererId와 동일 한지 비교하는 Predicate를 생성한다. 
<br> 
스펙 구현클래









